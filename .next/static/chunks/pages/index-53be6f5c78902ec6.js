(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(6616)}])},6616:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5893),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7294),_public_styles_App_module_css__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3728),_public_styles_App_module_css__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_public_styles_App_module_css__WEBPACK_IMPORTED_MODULE_3__),_public_styles_value_list__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3019),loading_wait=0,all_log="",tern=0,user_log="",top_pred=0,need_ans_add=0,need_user_log_len=50,ending=0,mid_check=0;let max_tern=5,ChatApp=()=>{let[messages,setMessages]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[inputMessage,setInputMessage]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),scrollToBottom=()=>{var e=document.getElementById("message-list");e.scrollTop=e.scrollHeight};(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{scrollToBottom()},[messages]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{var e={text:"내가 너의 mbti를 맞춰볼게! 나랑 조금만 이야기하면 돼! 보다 정확한 결과를 위해 단답은 피해줘~",isUser:!1};setMessages([e]);var s=_public_styles_value_list__WEBPACK_IMPORTED_MODULE_2__.Xl[Math.floor(Math.random()*_public_styles_value_list__WEBPACK_IMPORTED_MODULE_2__.Xl.length)];e={text:s,isUser:!1},setMessages(s=>[...s,e]),all_log+="\nyou: "+s},[]);let handleSendMessage=async()=>{if(""!==inputMessage.trim()&&0==loading_wait){if(tern<max_tern){loading_wait=1;let newMessage={text:inputMessage,isUser:!0};setMessages(e=>[...e,newMessage]),user_log+=inputMessage+", ",setInputMessage("");var user_message="\nfriend: "+inputMessage+" \n\n### \nyou: ";1==need_ans_add&&(user_message+=_public_styles_value_list__WEBPACK_IMPORTED_MODULE_2__.Fv[Math.floor(Math.random()*_public_styles_value_list__WEBPACK_IMPORTED_MODULE_2__.Fv.length)],need_ans_add=0),all_log+=user_message;try{let response=await fetch("".concat(_public_styles_value_list__WEBPACK_IMPORTED_MODULE_2__.z0),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:[all_log]})});if(!response.ok)throw Error("Network response was not ok");var data=await response.json();let bot_ans=data.data.toString();all_log+=bot_ans;let botResponseMessage={text:bot_ans,isUser:!1};setMessages(e=>[...e,botResponseMessage]),loading_wait=0}catch(error){console.error("Error sending message:",error),loading_wait=0}if(Math.random()>.7){var t=_public_styles_value_list__WEBPACK_IMPORTED_MODULE_2__.Xl[Math.floor(Math.random()*_public_styles_value_list__WEBPACK_IMPORTED_MODULE_2__.Xl.length)],initialBotMessage={text:t,isUser:!1};setMessages(e=>[...e,initialBotMessage]),all_log="\nyou: "+t,need_ans_add=1}}else if(tern==max_tern)try{loading_wait=1;let newMessage={text:inputMessage,isUser:!0};setMessages(e=>[...e,newMessage]),user_log+=inputMessage+", ",setInputMessage("");let user_message="\nfriend: "+inputMessage+" \n\n### \nyou: ";all_log+=user_message;try{let response=await fetch("".concat(_public_styles_value_list__WEBPACK_IMPORTED_MODULE_2__.z0),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:[all_log]})});if(!response.ok)throw Error("Network response was not ok");var data=await response.json();let bot_ans=data.data.toString();all_log+=bot_ans;let botResponseMessage={text:bot_ans,isUser:!1};setMessages(e=>[...e,botResponseMessage])}catch(error){console.error("Error sending message:",error)}let response=await fetch("".concat(_public_styles_value_list__WEBPACK_IMPORTED_MODULE_2__.z0,"_1"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:[user_log]})});var data=await response.json();data=data.data,data=eval("("+data+")");let bot_ans=(0,_public_styles_value_list__WEBPACK_IMPORTED_MODULE_2__.Hf)(data[0].label);var botResponseMessage={text:"너의 mbti는 "+bot_ans+"구나!",isUser:!1};setMessages(e=>[...e,botResponseMessage]);let t="<<ai예측 확률>>\n"+(0,_public_styles_value_list__WEBPACK_IMPORTED_MODULE_2__.Hf)(data[0].label)+" : "+Math.round(1e3*data[0].score)/10+"%, "+(0,_public_styles_value_list__WEBPACK_IMPORTED_MODULE_2__.Hf)(data[1].label)+" : "+Math.round(1e3*data[1].score)/10+"%, "+(0,_public_styles_value_list__WEBPACK_IMPORTED_MODULE_2__.Hf)(data[2].label)+" : "+Math.round(1e3*data[2].score)/10+"%, ";var botResponseMessage2={text:t,isUser:!1};setMessages(e=>[...e,botResponseMessage2]),loading_wait=0}catch(error){console.error("Error sending message:",error),loading_wait=0}else{let bot_ans="...새로고침해주세요...",botResponseMessage={text:bot_ans,isUser:!1};setMessages(e=>[...e,botResponseMessage]),loading_wait=0}tern+=1}};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:_public_styles_App_module_css__WEBPACK_IMPORTED_MODULE_3___default()["chat-app"],children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:_public_styles_App_module_css__WEBPACK_IMPORTED_MODULE_3___default()["chat-box"],children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h1",{"max-width":"100px",align:"center",children:"챗봇과 대화"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("h4",{align:"center",children:["(현재 ",max_tern+1,"턴까지 대화 후 mbti반환)"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:_public_styles_App_module_css__WEBPACK_IMPORTED_MODULE_3___default()["message-list"],id:"message-list",name:"message-list",children:messages.map((e,s)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Message,{message:e},s))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:_public_styles_App_module_css__WEBPACK_IMPORTED_MODULE_3___default()["user-input-box"],children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{onClick:handleSendMessage,className:_public_styles_App_module_css__WEBPACK_IMPORTED_MODULE_3___default()["button-font"],children:"Send"})," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"text",value:inputMessage,onChange:e=>setInputMessage(e.target.value),className:_public_styles_App_module_css__WEBPACK_IMPORTED_MODULE_3___default()["input-font"]})]})]})})},Message=e=>{let{message:s}=e,a=s.isUser?_public_styles_App_module_css__WEBPACK_IMPORTED_MODULE_3___default()["user-message"]:_public_styles_App_module_css__WEBPACK_IMPORTED_MODULE_3___default()["bot-message"];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:a,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{children:s.text})})};__webpack_exports__.default=ChatApp},3019:function(e,s,a){"use strict";a.d(s,{Fv:function(){return o},Hf:function(){return i},Xl:function(){return r},z0:function(){return n}});let n="https://ldhldh-chat-and-bert-rest-api-with-gradio.hf.space/run/predict",r=["너는 취미가 뭐니?","주말엔 주로 뭐를 해?","가장 좋아하는 음식이 뭐야?","자주 듣는 노래 장르가 뭐야?","친구는 많은 편이니?","내일은 뭐 할거야?","혹시 지금 솔로야?","요즘 듣는 노래가 있을까?","요즘 드라마는 뭐 봐?","가장 최근에 본 영화는 어떤 내용이야?","요즘 고민같은거 있어?","나한테 물어보고 싶은거 있어?","만약 여행을 간다면 어디로 가고싶어?","오늘 하루는 어땠어?","너는 꿈이 뭐야?","가장 좋아하는 색이 뭐야?","봄, 여름, 가을, 겨울중에 어떤 계절이 제일 좋아?","이제 물어볼 주제도 없따.."],o=["아하","헐","아","아 진짜","음","그래?","엥","오","와","우와","와 정말","오 정말","아 정말","와 진짜","헐 진짜","키키","대박","그렇구나"];function i(e){return({LABEL_0:"INTJ",LABEL_1:"INTP",LABEL_2:"INFJ",LABEL_3:"INFP",LABEL_4:"ISTJ",LABEL_5:"ISTP",LABEL_6:"ISFJ",LABEL_7:"ISFP",LABEL_8:"ENTJ",LABEL_9:"ENTP",LABEL_10:"ENFJ",LABEL_11:"ENFP",LABEL_12:"ESTJ",LABEL_13:"ESTP",LABEL_14:"ESFJ",LABEL_15:"ESFP"})[e=e.toString()]}},3728:function(e){e.exports={"app-container":"App_app-container__shAHp","user-message":"App_user-message__G2Vcs","bot-message":"App_bot-message__GFT5m","chat-app":"App_chat-app__JkqTr","message-list":"App_message-list__JShNd","user-input-box":"App_user-input-box__H2wIb",clearfix:"App_clearfix__CYwU1"}}},function(e){var s=function(s){return e(e.s=s)};e.O(0,[774,888,179],function(){return s(5557)}),_N_E=e.O()}]);